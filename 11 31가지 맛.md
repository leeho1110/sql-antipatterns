# 11. 31가지 맛

- 만약 특정 컬럼에 저장되는 값이 항상 특정 집합의 요소 중 하나가 되어야 한다면 어떻게 할 수 있을까요?
    - 흔히 사용하는 안티패턴에는 CHECK, ENUM이 존재합니다.
- 하지만 집합의 구성 요소가 변할 때 문제가 생깁니다.
    - 집합의 구성 요소가 무엇인지 어떻게 알 수 있을까요?
        - 단순히 `SELECT DISTINCT status FROM Bugs;` 와 같은 쿼리로 가능할까요?
        - 불가능합니다. 모든 요소가 테이블의 레코드에 한번씩 쓰였을 것이란 보장이 없기 때문이죠.
        - `information_schema` 테이블을 통해 알 수 있지만 너무 복잡합니다.
    - 집합의 값을 추가하거나 삭제할수도 있을까요?
        - 아니요 지원하는 문법은 없습니다. 새로운 값의 집합으로 재할당하는 법 밖에 없습니다.
        - 만약 특정 요소가 필요하지 않게 된다면 어떻게 해야될까요? 할 수 없습니다. 그대로 유지해야합니다.
- 이 문제는 요소 집합을 표현하는 테이블을 별도로 정의해 해결할 수 있습니다.
    - 예를 들어 `NEW`, `IN_PROGRESS`, `FIXED` 타입이 필요하다면 아래와 같은 테이블을 만드는 거죠.
        
        
        | STATUS |
        | --- |
        | NEW |
        | IN_PROGRESS |
        | FIXED |
    - 이 방식을 사용하면 테이블에 INSERT, DELETE 를 실행해 쉽게 집합을 변경할 수 있습니다.
- 애플리케이션에서 ENUM을 지원하는 경우 위처럼 테이블까지 만들어 사용한 적은 없었습니다.
    - 열거형을 String 형태로 변경해 넣거나, 순서를 정수 타입으로 표현해 저장한 뒤 재변환하는 작업을 수행하면 됩니다.